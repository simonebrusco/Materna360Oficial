Tech & Tooling (versão atualizada)

Framework: Next.js 14 (App Router em app/)
Linguagem: TypeScript
Estilo: Tailwind CSS (tailwind.config)
Ícones: lucide-react
Animações: Framer Motion (sutil, premium)
Gerenciador de pacotes: pnpm
Node: 20.x (igual Vercel/Builder)

Estrutura & Paths

App Router em app/ (não mover para src/app neste momento).

Componentes compartilhados em components/
(subpastas: components/ui e components/features).

Alias de importação: @/* (não alterar).

Não duplicar páginas nem mover arquivos de rota sem forte justificativa.

Scripts & Dev Server

Porta do dev server (local e Builder): http://localhost:3001

package.json:

{
  "scripts": {
    "dev": "next dev -p 3001",
    "build": "next build",
    "start": "next start"
  }
}


CI/Vercel/Builder: usar pnpm install --frozen-lockfile.

Configuração do Builder (obrigatório alinhar)

Setup Script:

pnpm install --frozen-lockfile


Development Server Command:

NEXT_TELEMETRY_DISABLED=1 pnpm exec next dev -p 3001


Auto-detect dev server URL: desligado.
Development Server URL: http://localhost:3001/

Variáveis principais:

NEXT_PUBLIC_SITE_URL=http://localhost:3001

DemaIs variáveis (públicas/secretas) espelhadas da Vercel.

Branching & PRs

Produção: main.

Trabalho diário: feat/<nome>, fix/<nome>, chore/<nome>.

PR em Draft de feat/* → main. Título com Conventional Commits.

Diretrizes de Design

Visual “premium”: cantos arredondados, sombras suaves, micro-interações discretas.

Paleta: Primária #ff005e, Secundária #ffd8e6 (apoio: #2f3a56, #545454, #000000, #ffffff).

Mobile-first e acessibilidade (foco visível, contraste legível).

O que NÃO mudar

Manter pnpm.

Não alterar @/*, baseUrl, paths.

Porta 3001 no dev/Builder.

Segredos via .env/variáveis (nunca hardcode).

Não introduzir breaking changes em next.config.mjs ou APIs.

Entregáveis & UX

Telas: “Meu Dia”, “Cuidar”, “Descobrir”, “Eu360”, “Maternar”, “Planos” com tab bar inferior consistente.

Reutilizar átomos de components/ui e compor em components/features.

Animações sutis e tokens de sombra do Tailwind.

Observações operacionais

Imagens Builder.io — garantir em next.config.mjs:

export default {
  images: {
    remotePatterns: [
      { protocol: 'https', hostname: 'cdn.builder.io', pathname: '/api/v1/image/**' }
    ]
  }
}


Cache server dinâmico (quando necessário):

import { unstable_noStore as noStore } from 'next/cache';
if (typeof (noStore as any) === 'function') (noStore as any)();

Troubleshooting rápido

“Builder não reflete o GitHub”

Confirme branch no Code do Builder = origin/main (Switch Branch → origin/main → Checkout).

Refresh Preview.

Verifique porta 3001 e NEXT_PUBLIC_SITE_URL=http://localhost:3001.